[{"D:\\node\\proj\\Info-Vis\\src\\index.js":"1","D:\\node\\proj\\Info-Vis\\src\\components\\App.js":"2","D:\\node\\proj\\Info-Vis\\src\\serviceWorker.js":"3","D:\\node\\proj\\Info-Vis\\src\\store\\index.js":"4","D:\\node\\proj\\Info-Vis\\src\\components\\MapView.js":"5","D:\\node\\proj\\Info-Vis\\src\\store\\api.js":"6","D:\\node\\proj\\Info-Vis\\src\\components\\Treemap.js":"7","D:\\node\\proj\\Info-Vis\\src\\components\\LineChart.js":"8"},{"size":385,"mtime":1610778308766,"results":"9","hashOfConfig":"10"},{"size":1486,"mtime":1610883736096,"results":"11","hashOfConfig":"10"},{"size":5227,"mtime":1610778308778,"results":"12","hashOfConfig":"10"},{"size":2756,"mtime":1610883736147,"results":"13","hashOfConfig":"10"},{"size":20048,"mtime":1610887383592,"results":"14","hashOfConfig":"10"},{"size":308,"mtime":1610883736138,"results":"15","hashOfConfig":"10"},{"size":5257,"mtime":1610889968402,"results":"16","hashOfConfig":"10"},{"size":4152,"mtime":1610887383561,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"18y6vmj",{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"27","messages":"28","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"20"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\node\\proj\\Info-Vis\\src\\index.js",[],["36","37"],"D:\\node\\proj\\Info-Vis\\src\\components\\App.js",[],"D:\\node\\proj\\Info-Vis\\src\\serviceWorker.js",[],"D:\\node\\proj\\Info-Vis\\src\\store\\index.js",[],"D:\\node\\proj\\Info-Vis\\src\\components\\MapView.js",["38","39","40","41","42","43","44"],"\r\nimport React, {useContext} from 'react';\r\nimport ReactEcharts from 'echarts-for-react';\r\nimport {store} from \"../store\";\r\nimport '../index.css';\r\nimport echarts from 'echarts';\r\nimport usaJson from '../USA.json'; // 使用美国地图数据\r\n\r\n\r\n// 按日期取出某一天confirmed/deaths的数据\r\nfunction convertData(state,mode,date) {\r\n    let data = state.data\r\n    if (data.length === 0)\r\n        return;\r\n    const res = [];\r\n    let temp={};\r\n    temp.name = data[0].province_name;\r\n    temp.value = 0;\r\n    temp.population = 0;\r\n    if(mode === 0){ // confirmed_data\r\n        for (let i = 0; i < data.length; i++) {\r\n        if(data[i].province_name === temp.name)\r\n            temp.value += data[i].confirmed_data[date];\r\n        else{\r\n            res.push({\r\n                name: temp.name,\r\n                value: temp.value,\r\n            });\r\n            temp.name = data[i].province_name;\r\n            temp.value = data[i].confirmed_data[date];\r\n            }   \r\n        }\r\n    }\r\n    else if(mode === 1){ // confirmed_deaths_data\r\n        for (let i = 0; i < data.length; i++) {\r\n            if(data[i].province_name === temp.name)\r\n                temp.value += data[i].deaths_data[date];\r\n            else{\r\n                res.push({\r\n                    name: temp.name,\r\n                    value: temp.value,\r\n                });\r\n                temp.name = data[i].province_name;\r\n                temp.value = data[i].deaths_data[date];\r\n                }   \r\n            }\r\n        }\r\n    else if(mode === 2){ // confirmed_rate\r\n            for (let i = 0; i < data.length; i++) {\r\n            if(data[i].province_name === temp.name)\r\n            {\r\n                temp.value += data[i].confirmed_data[date];\r\n                temp.population += data[i].Population;\r\n            }\r\n            else{\r\n                res.push({\r\n                    name: temp.name,\r\n                    value: temp.value*1000/temp.population,\r\n                });\r\n                temp.name = data[i].province_name;\r\n                temp.value = data[i].confirmed_data[date];\r\n                temp.population = data[i].Population;\r\n                }   \r\n            }\r\n        //console.log(res);\r\n        }\r\n    else if(mode === 3){ // confirmed_deaths_rate\r\n            for (let i = 0; i < data.length; i++) {\r\n                if(data[i].province_name === temp.name)\r\n                {\r\n                    temp.value += data[i].deaths_data[date];\r\n                    temp.population += data[i].Population;\r\n                }\r\n                else{\r\n                    res.push({\r\n                        name: temp.name,\r\n                        value: temp.value*10000/temp.population,\r\n                    });\r\n                    temp.name = data[i].province_name;\r\n                    temp.value = data[i].deaths_data[date];\r\n                    temp.population = data[i].Population;\r\n                    }   \r\n                }\r\n                //console.log(res);\r\n        }\r\n    return res;\r\n}\r\n\r\n/* 读取所有日期的数据，直接传回给options */\r\nfunction LoadFullData(state) {\r\n    \r\n    let FullData = [];\r\n    let data = state.data;\r\n    if (data.length === 0)\r\n        return;\r\n    for (let i = 0; i < data[0].confirmed_data.length-1; i++)\r\n    {\r\n        let name = '';\r\n        if(state.mode === 'confirmed' || state.mode === 'deaths'){\r\n            if(i<14)\r\n                name = 'USA confirmed cases and deaths (2020-3-' + (i+18).toString() + ')';\r\n            else\r\n                name = 'USA confirmed cases and deaths (2020-4-' + (i-13).toString() + ')';\r\n        }\r\n        else{\r\n            if(i<14)\r\n                name = 'USA confirmed rate and death rate (2020-3-' + (i+18).toString() + ')';\r\n            else\r\n                name = 'USA confirmed rate and death rate (2020-4-' + (i-13).toString() + ')';\r\n        }\r\n        FullData.push(\r\n        {\r\n            title: { text: name},\r\n            series: [{data:convertData(state,0,i)},{data:convertData(state,2,i)},\r\n                    {data:convertData(state,1,i)},{data:convertData(state,3,i)}]\r\n        } \r\n        )\r\n    }\r\n    return FullData;\r\n}\r\n\r\nfunction MapView(){\r\n    // const {state, changeState} = useState()\r\n    const {state, dispatch} = useContext(store);\r\n    echarts.registerMap('USA', usaJson, {\r\n        // 部分区域调整位置\r\n        'Alaska': {              // 阿拉斯加\r\n            left: -140,\r\n            top: 23,\r\n            width: 25\r\n        },\r\n        'Hawaii': {\r\n            left: -110,        // 夏威夷\r\n            top: 22,\r\n            width: 10\r\n        },\r\n        'Puerto Rico': {       // 波多黎各国自治区\r\n            left: -76,\r\n            top: 26,\r\n            width: 5\r\n        }\r\n    });\r\n    const getOption = () => {\r\n        var option = {\r\n            baseOption: {\r\n                timeline: {\r\n                    left:'left',\r\n                    right :'left',\r\n                    loop: false,\r\n                    autoPlay: function(){ \r\n                        console.log(state.time_play)\r\n                        return state.time_play;}(),\r\n                    currentIndex: state.date,\r\n                    playInterval: 800,\r\n                    tooltip: {\r\n                        formatter: function(params) {\r\n                        return params.name;\r\n                        }\r\n                    },\r\n                    axisType: 'category',\r\n                    label:{\r\n                        color: '#000000',\r\n                        formatter: function (value, index) {\r\n                            // 格式化成月/日，只在第一个刻度显示年份\r\n                            if(index === 0 || index === 14 || index === 43 || \r\n                                index<12&&index>3&&(index-1)%3===0 || index>14&&(index-12)%4===0)\r\n                            {\r\n                                var date = new Date(value);\r\n                                var texts = [(date.getMonth() + 1), date.getDate()];\r\n                                if (index === 0) {\r\n                                    texts.unshift('2020');\r\n                                }\r\n                                return texts.join('/');\r\n                            }\r\n                            return '' \r\n                        },\r\n                        interval: 0,\r\n                    },\r\n                    emphasis: { controlStyle:{color: '#800026',} },\r\n                    data:[ \r\n                        {\r\n                            value: '2020-03-18',\r\n                            symbol: 'diamond',  // 此项的图形的特别设置。\r\n                            symbolSize: 18,      // 此项的图形大小的特别设置。\r\n                            tooltip: {\r\n                                formatter: function(params) {\r\n                                return params.name + '<br>' + '疫情开始爆发';\r\n                                }\r\n                            },\r\n                        },    \r\n                        '2020-03-19','2020-03-20','2020-03-21','2020-03-22','2020-03-23',\r\n                        '2020-03-24','2020-03-25','2020-03-26','2020-03-27','2020-03-28','2020-03-29','2020-03-30',\r\n                        '2020-03-31',\r\n                        {\r\n                            value: '2020-04-01',\r\n                            symbol: 'diamond',  // 此项的图形的特别设置。\r\n                            symbolSize: 18,      // 此项的图形大小的特别设置。\r\n                            tooltip: {\r\n                                formatter: function(params) {\r\n                                return params.name + '<br>' + '感染人数剧增';\r\n                                }\r\n                            },\r\n                        },\r\n                        '2020-04-02','2020-04-03','2020-04-04','2020-04-05','2020-04-06','2020-04-07','2020-04-08','2020-04-09',\r\n                        '2020-04-10','2020-04-11','2020-04-12','2020-04-13','2020-04-14','2020-04-15','2020-04-16','2020-04-17',\r\n                        '2020-04-18','2020-04-19','2020-04-20','2020-04-21','2020-04-22','2020-04-23','2020-04-24','2020-04-25',\r\n                        '2020-04-26','2020-04-27','2020-04-28','2020-04-29',\r\n                        {\r\n                            value: '2020-04-30',\r\n                            symbol: 'diamond',\r\n                            symbolSize: 18,\r\n                            tooltip: {\r\n                                formatter: function(params) {\r\n                                return params.name + '<br>' + '形式一片危机';\r\n                                }\r\n                            },\r\n                        },],\r\n                },\r\n                title: {\r\n                    subtext: 'Data from CSSEGISandData',\r\n                    subtextStyle:{fontSize: '15'},\r\n                    left: 'left',\r\n                    top:'5%'\r\n                },\r\n                animation:false,\r\n                tooltip: {\r\n                    trigger: 'item',\r\n                    showDelay: 0,\r\n                    transitionDuration: 0.2,\r\n                    enterable: true,\r\n                    formatter: function (params) {\r\n                        var value = (params.value + '').split('.');\r\n                        var temp = value[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,');\r\n                        if(state.mode === 'confirmed' || state.mode === 'deaths'||(value[1] === undefined))\r\n                            return params.seriesName + '<br/>' + params.name + ': ' + temp;\r\n                        else if(state.mode === 'confirmedRate')\r\n                            return params.seriesName + '<br/>' + params.name + ': ' \r\n                            + temp +'.' + value[1].substring(0,3) + '‰';\r\n                        else if(state.mode === 'deathsRate')\r\n                            return params.seriesName + '<br/>' + params.name + ': ' \r\n                            + temp +'.' + value[1].substring(0,3) + '‱'; \r\n                    },\r\n                    textStyle:{\r\n                        fontWeight:'bold',\r\n                        textBorderColor:'black',\r\n                        textBorderWidth:'2',\r\n                        fontSize:'16',\r\n                    }\r\n                },\r\n                visualMap: [\r\n                {\r\n                    type: 'continuous',\r\n                    left: 'right',\r\n                    top:'53%',\r\n                    seriesIndex:0,\r\n                    show: function(){ return state.mode === \"confirmed\";}(),\r\n                    inRange: {\r\n                    color: ['#f7fbff','#deebf7','#c6dbef','#9ecae1','#6baed6','#4292c6','#2171b5','#08519c','#08306b']\r\n                    },\r\n                    min:0,\r\n                    max:10000,\r\n                    text: ['High', 'Low'],           // 文本，默认为数值文本\r\n                    calculable: true,\r\n                    hoverLink:true\r\n                },\r\n                {\r\n                    type: 'continuous',\r\n                    left: 'right',\r\n                    top:'53%',\r\n                    seriesIndex:2,\r\n                    show: function(){ return state.mode === \"deaths\";}(),\r\n                    inRange: {\r\n                    color: ['#ffffcc','#ffeda0','#fed976','#feb24c','#fd8d3c','#fc4e2a','#e31a1c','#bd0026','#800026']\r\n                    },\r\n                    min:0,\r\n                    max:500,\r\n                    text: ['High', 'Low'],           // 文本，默认为数值文本\r\n                    calculable: true,\r\n                    hoverLink:true\r\n                },\r\n                {\r\n                    type: 'continuous',\r\n                    left: 'right',\r\n                    top:'53%',\r\n                    seriesIndex:1,\r\n                    precision:3,\r\n                    show: function(){ return state.mode === \"confirmedRate\";}(),\r\n                    inRange: {\r\n                    color: ['#f7fbff','#deebf7','#c6dbef','#9ecae1','#6baed6','#4292c6','#2171b5','#08519c','#08306b']\r\n                    },\r\n                    min:0,\r\n                    max:5,\r\n                    text: ['High (‰)', 'Low (‰)'],           // 文本，默认为数值文本\r\n                    calculable: true,\r\n                    hoverLink:true\r\n                },\r\n                {\r\n                    type: 'continuous',\r\n                    left: 'right',\r\n                    top:'53%',\r\n                    seriesIndex:3,\r\n                    precision:3,\r\n                    show: function(){return state.mode === \"deathsRate\";}(),\r\n                    inRange: {\r\n                    color: ['#ffffcc','#ffeda0','#fed976','#feb24c','#fd8d3c','#fc4e2a','#e31a1c','#bd0026','#800026']\r\n                    },\r\n                    min:0,\r\n                    max:1,\r\n                    text: ['High (‱)', 'Low (‱)'],           // 文本，默认为数值文本\r\n                    calculable: true,\r\n                    hoverLink:true\r\n                }\r\n                ],\r\n                color:['#08519c','#08519c','#bd0026','#bd0026'], // 图例的颜色\r\n                legend: {\r\n                    show: 'true',\r\n                    icon: 'roundRect',\r\n                    orient : 'vertical',\r\n                    data: ['USA confirmed cases','USA confirmed rate','USA deaths','USA deaths rate'],\r\n                    selected: {\r\n                        'USA confirmed cases': function(){ return state.mode === \"confirmed\";}(),\r\n                        'USA confirmed rate': function(){ return state.mode === \"confirmedRate\";}(),\r\n                        'USA deaths': function(){return state.mode === \"deaths\";}(),\r\n                        'USA deaths rate': function(){return state.mode === \"deathsRate\";}(),\r\n                    },\r\n                    left: 'right',\r\n                    top: '5%',\r\n                    selectedMode:'single', // 设置为单选模式,或者是确诊,或者是死亡人数\r\n                    textStyle:{\r\n                        fontWeight:'bold',\r\n                        fontSize: 14,\r\n                    }\r\n                },\r\n                series: [\r\n                    {\r\n                        type: 'map',\r\n                        map:'USA',\r\n                        name: 'USA confirmed cases',\r\n                        showLegendSymbol:false,\r\n                        layoutCenter: ['43%', '55%'],\r\n                        layoutSize: 700,\r\n                        roam: true,\r\n                        scaleLimit:{min:0.6,max:5},\r\n                        emphasis: {\r\n                            label: {\r\n                                show: true,\r\n                                fontSize: 16,\r\n                                color: '#111',\r\n                            },\r\n                            itemStyle: {\r\n                                areaColor: '#FFF3B0',\r\n                                borderWidth: 1.5,\r\n                                borderColor: '#333',\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        type: 'map',\r\n                        map:'USA',\r\n                        name: 'USA confirmed rate',\r\n                        showLegendSymbol:false,\r\n                        layoutCenter: ['43%', '55%'],\r\n                        layoutSize: 700,\r\n                        roam: true,\r\n                        scaleLimit:{min:0.6,max:5},\r\n                        emphasis: {\r\n                            label: {\r\n                                show: true,\r\n                                fontSize: 16,\r\n                                color: '#111',\r\n                            },\r\n                            itemStyle: {\r\n                                areaColor: '#FFF3B0',\r\n                                borderWidth: 1.5,\r\n                                borderColor: '#333',\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        type: 'map',\r\n                        map:'USA',\r\n                        name:'USA deaths',\r\n                        showLegendSymbol:false,\r\n                        layoutCenter: ['45%', '55%'],\r\n                        layoutSize: 700,\r\n                        roam: true,\r\n                        scaleLimit:{min:0.6,max:5},\r\n                        emphasis: {\r\n                            label: {\r\n                                show: true,\r\n                                fontSize: 16,\r\n                                color: '#111',\r\n                            },\r\n                            itemStyle: {\r\n                                areaColor: '#E9FAFF',\r\n                                borderWidth: 1.5,\r\n                                borderColor: '#333',\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        type: 'map',\r\n                        map:'USA',\r\n                        name:'USA deaths rate',\r\n                        showLegendSymbol:false,\r\n                        layoutCenter: ['45%', '55%'],\r\n                        layoutSize: 700,\r\n                        roam: true,\r\n                        scaleLimit:{min:0.6,max:5},\r\n                        emphasis: {\r\n                            label: {\r\n                                show: true,\r\n                                fontSize: 16,\r\n                                color: '#111',\r\n                            },\r\n                            itemStyle: {\r\n                                areaColor: '#E9FAFF',\r\n                                borderWidth: 1.5,\r\n                                borderColor: '#333',\r\n                            }\r\n                        },\r\n                    },\r\n                ]\r\n            },\r\n            options:LoadFullData(state)\r\n    }\r\n        return option;\r\n    };\r\n    let onEvents = {\r\n        \r\n        'click': function(params){ // YRH 点击省份更换省份\r\n            //console.log(\"click\");\r\n            console.log(params);\r\n            // 点击地图上的州，传给dispatch需要一个州的数据\r\n            if (params.componentType === 'series'){\r\n                let action = 'addState_' + params.name;\r\n                dispatch({type: action});\r\n            }\r\n        },\r\n\r\n        'legendselectchanged': function(params) {   // YRH 点击legend改变mode\r\n\r\n            if(params.name === 'USA deaths'){\r\n                let action = 'changeMode_deaths';\r\n                dispatch({type: action});\r\n            }\r\n            else if (params.name === 'USA confirmed cases') {\r\n                let action = 'changeMode_confirmed';\r\n                dispatch({type: action});\r\n            }\r\n            else if (params.name === 'USA confirmed rate') {\r\n                let action = 'changeMode_confirmedRate';\r\n                dispatch({type: action});\r\n            }\r\n            else if (params.name === 'USA deaths rate') {\r\n                let action = 'changeMode_deathsRate';\r\n                dispatch({type: action});\r\n            }\r\n        },\r\n\r\n        'timelinechanged': function(params) {   // 时间轴刷新\r\n            \r\n            //console.log(params);\r\n            //console.log('change the date:' + params.currentIndex.toString());\r\n            let action = 'changeDate_' + params.currentIndex;\r\n            dispatch({type: action});\r\n        },\r\n        'timelineplaychanged': function(params) {\r\n            console.log(params.playState);   \r\n            let action = 'changeTimePlay_' + params.playState;\r\n            dispatch({type: action});\r\n        }\r\n    }\r\n\r\n    return <ReactEcharts option={getOption()}\r\n             style={{\r\n                width: '100%',\r\n                height: '95%' // 无法调节垂直居中,待解决问题\r\n               }}\r\n             onEvents={onEvents} />;\r\n\r\n}\r\n\r\nexport default MapView;\r\n","D:\\node\\proj\\Info-Vis\\src\\store\\api.js",[],"D:\\node\\proj\\Info-Vis\\src\\components\\Treemap.js",["45","46"],"D:\\node\\proj\\Info-Vis\\src\\components\\LineChart.js",["47"],{"ruleId":"48","replacedBy":"49"},{"ruleId":"50","replacedBy":"51"},{"ruleId":"52","severity":1,"message":"53","line":165,"column":76,"nodeType":"54","messageId":"55","endLine":165,"endColumn":78},{"ruleId":"52","severity":1,"message":"53","line":166,"column":50,"nodeType":"54","messageId":"55","endLine":166,"endColumn":52},{"ruleId":"52","severity":1,"message":"53","line":166,"column":68,"nodeType":"54","messageId":"55","endLine":166,"endColumn":70},{"ruleId":"52","severity":1,"message":"53","line":166,"column":79,"nodeType":"54","messageId":"55","endLine":166,"endColumn":81},{"ruleId":"56","severity":1,"message":"57","line":187,"column":61,"nodeType":"58","messageId":"59","endLine":187,"endColumn":62},{"ruleId":"56","severity":1,"message":"57","line":200,"column":61,"nodeType":"58","messageId":"59","endLine":200,"endColumn":62},{"ruleId":"56","severity":1,"message":"57","line":214,"column":61,"nodeType":"58","messageId":"59","endLine":214,"endColumn":62},{"ruleId":"60","severity":1,"message":"61","line":25,"column":72,"nodeType":"58","messageId":"62","endLine":25,"endColumn":74},{"ruleId":"63","severity":1,"message":"64","line":51,"column":19,"nodeType":"65","messageId":"66","endLine":51,"endColumn":27},{"ruleId":"63","severity":1,"message":"64","line":49,"column":19,"nodeType":"65","messageId":"66","endLine":49,"endColumn":27},"no-native-reassign",["67"],"no-negated-in-lhs",["68"],"no-mixed-operators","Unexpected mix of '||' and '&&'.","LogicalExpression","unexpectedMixedOperator","no-useless-concat","Unexpected string concatenation of literals.","BinaryExpression","unexpectedConcat","eqeqeq","Expected '===' and instead saw '=='.","unexpected","no-unused-vars","'dispatch' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]